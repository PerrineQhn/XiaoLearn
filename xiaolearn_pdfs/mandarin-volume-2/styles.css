:root{
  --paper: #fdfbf7;
  --paper-texture: #f9f5ed;
  --ink: #5c3d2e;
  --muted: #8b6f5e;

  --accent-gold: #d4a574;
  --accent-red: #c84848;
  --line: rgba(92,61,46,0.15);

  --hanzi-font: "STKaiti", "KaiTi", "STFangsong", "FangSong", "Kaiti SC", "DFKai-SB", "BiauKai",
                "HanziPen SC", "HanziPen TC", "Noto Serif SC", "Noto Sans SC", "PingFang SC",
                "Hiragino Sans GB", "Microsoft YaHei", serif;

  /* Police manuscrite pour les exercices d'écriture - Google Fonts en priorité */
  --hanzi-handwritten: "Liu Jian Mao Cao", "Long Cang", "Zhi Mang Xing", "Ma Shan Zheng",
                       "HanziPen SC", "HanziPen TC", "Xingkai SC", "STXingkai",
                       "Weibei SC", "STKaiti", cursive, serif;
}

*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  background: #2d1b12;
  color:var(--ink);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial,
               "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
}

body.workbook{
  --paper: #fdfbf7;
  --paper-texture: #f9f5ed;
  --ink: #5c3d2e;
  --muted: #8b6f5e;
  --accent-gold: #d4a574;
  --accent-red: #c84848;
  --line: rgba(92,61,46,0.15);
  --hanzi-font: "STKaiti", "KaiTi", "STFangsong", "FangSong", "Kaiti SC", "DFKai-SB", "BiauKai",
                "HanziPen SC", "HanziPen TC", "Noto Serif SC", "Noto Sans SC", "PingFang SC",
                "Hiragino Sans GB", "Microsoft YaHei", serif;
  --hanzi-handwritten: "Ma Shan Zheng", "Long Cang", "Xingkai SC", "HanziPen SC",
                       "Zhi Mang Xing", "STKaiti", "Weibei SC",
                       "HanziPen TC", "STXingkai",  cursive, serif;
  background: #2d1b12;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial,
               "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
}

/* Hanzi standard styling */
.cover .seal .han,
.table td .hanzi,
.workbook .keyword .k-hanzi,
.workbook .example .hanzi,
.topbar .right .zh,
.day-divider .theme,
.section-divider .pill{
  font-family: var(--hanzi-font);
  letter-spacing: 0.2px;
}

/* Hanzi handwritten styling - pour les exercices d'écriture */
.practice .big .char,
.cell .ghost,
.workbook .rewrite-hanzi,
.workbook .rewrite-grid .ghost{
  font-family: var(--hanzi-handwritten);
  letter-spacing: 0.1px;
}

#app{ padding: 18px 0 60px; }

.page{
  width: 210mm;
  height: 297mm;
  margin: 16px auto;
  background: var(--paper);
  position: relative;
  overflow: hidden;
  box-shadow: 0 24px 80px rgba(92,61,46,0.25);
}

.page::before{
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(92,61,46,0.008) 2px,
      rgba(92,61,46,0.008) 4px
    );
  pointer-events: none;
  z-index: 0;
}

.workbook .page{
  background: var(--paper);
  box-shadow: 0 24px 80px rgba(92,61,46,0.25);
}

.page-inner{
  padding: 16mm 16mm 18mm;
  height: 100%;
  position: relative;
  z-index: 1;
}

.pagenum{
  position:absolute;
  right: 10mm;
  bottom: 8mm;
  font-size: 11px;
  color: var(--muted);
  font-weight: 700;
}

hr.sep{
  border:0;
  border-top: 2px solid var(--line);
  margin: 10px 0;
  position: relative;
}
hr.sep::after{
  content: '';
  position: absolute;
  top: -2px;
  left: 0;
  width: 40px;
  height: 2px;
  background: var(--accent-gold);
}

.h1{
  font-weight: 900;
  font-size: 28px;
  margin: 0 0 10px;
  letter-spacing: .2px;
  color: var(--ink);
}
.p{
  margin: 0 0 8px;
  line-height: 1.45;
  color: var(--ink);
  opacity: 0.85;
}
.small{ font-size: 12px; color: var(--muted); line-height: 1.4; }
.badge{
  display:inline-block;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  font-size: 12px;
  letter-spacing: 0.08em;
  background: rgba(212,165,116,0.1);
  border: 1px solid rgba(212,165,116,0.3);
  color: var(--ink);
}

.cover{
  display:flex;
  flex-direction: column;
  gap: 12px;
  justify-content: center;
  background-image: url('./cover.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  align-items: center;
  text-align:center;
  /* Déborder au-delà du padding de page-inner */
  margin: -16mm -16mm -18mm -16mm;
  padding: 16mm 16mm 18mm 16mm;
  height: calc(100% + 16mm + 18mm);
}

.cover-workbook,
.cover-dictionary{
  padding: 0;
  justify-content: flex-end;
  align-items: center;
}

.cover-workbook::before,
.cover-dictionary::before{
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 30%);
  pointer-events: none;
}

.cover-workbook .cover-top,
.cover-dictionary .cover-top{
  position: absolute;
  top: 18mm;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  text-align: center;
  width: 85%;
}

.cover-workbook .cover-title-zh,
.cover-dictionary .cover-title-zh{
  font-size: 68px;
  font-weight: 700;
  color: #5c3d2e;
  margin-bottom: 15px;
  font-family: "STKaiti", "KaiTi", "FangSong", "STFangsong", serif;
  letter-spacing: 0.05em;
  text-shadow: 0 2px 8px rgba(255,255,255,0.8);
}

.cover-workbook .cover-title-fr,
.cover-dictionary .cover-title-fr{
  font-size: 32px;
  font-weight: 600;
  color: #5c3d2e;
  margin-bottom: 20px;
  font-family: "Georgia", "Garamond", "Times New Roman", serif;
  letter-spacing: 0.02em;
  text-shadow: 0 2px 4px rgba(255,255,255,0.8);
}

.cover-dictionary .cover-subtitle-fr{
  font-size: 14px;
  font-weight: 600;
  color: rgba(92,61,46,0.75);
  margin: -10px 0 16px;
  font-family: "Georgia", "Garamond", "Times New Roman", serif;
  letter-spacing: 0.03em;
}

.cover-workbook .cover-volume,
.cover-dictionary .cover-volume{
  display: inline-block;
  background: #d4a574;
  color: #fdfbf7;
  font-size: 20px;
  font-weight: 700;
  padding: 8px 35px;
  border-radius: 50px;
  font-family: "Georgia", "Garamond", "Times New Roman", serif;
  letter-spacing: 0.15em;
  box-shadow: 0 4px 12px rgba(92,61,46,0.2);
}

.cover-workbook .cover-content,
.cover-dictionary .cover-content{
  position: absolute;
  bottom: 10mm;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  text-align: center;
}

/* Impression */
@page { size: A4; margin: 0; }
@media print{
  html, body{ background: #fff; }
  #app{ padding: 0; }
  .page{
    margin: 0;
    box-shadow: none;
    page-break-after: always;
  }
  .page::before{ display: none; }
  .page *{
    box-shadow: none !important;
    text-shadow: none !important;
  }
  .page-cover .page-inner{ padding: 0; }
  .page-cover .cover{
    margin: 0;
    padding: 0;
    height: 100%;
  }
}

.cover-workbook .brand,
.cover-dictionary .brand{
  margin: 0;
  font-size: 32px;
  font-weight: 800;
  letter-spacing: 0.02em;
  color: #5c3d2e;
  text-shadow: 0 2px 4px rgba(255,255,255,0.9);
}
.workbook .badge{
  background: rgba(212,165,116,0.15);
  color: var(--ink);
  font-weight: 800;
  border: 1px solid rgba(212,165,116,0.3);
}
.cover-workbook .badge{
  background: #d4a574;
  color: #ffffff;
  border: 1px solid rgba(255,255,255,0.65);
  box-shadow: 0 6px 18px rgba(92,61,46,0.25);
  letter-spacing: 0.1em;
}
.cover-dictionary .badge{
  background: #d4a574;
  color: #ffffff;
  border: 1px solid rgba(255,255,255,0.65);
  box-shadow: 0 6px 18px rgba(92,61,46,0.25);
  letter-spacing: 0.1em;
}
.cover .seal{
  width: 140px;
  height: 140px;
  border-radius: 999px;
  border: 4px solid var(--accent-gold);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  box-shadow: 0 4px 16px rgba(212,165,116,0.25);
}
.cover .seal::after{
  content:"";
  position:absolute;
  width: 108px;
  height: 108px;
  border-radius: 999px;
  border: 2px dashed rgba(212,165,116,.5);
}
.cover .seal .han{
  font-size: 52px;
  font-weight: 900;
  color: var(--accent-gold);
}
.cover .title{
  font-size: 40px;
  font-weight: 900;
  margin: 6px 0 0;
  color: var(--ink);
}
.cover .subtitle{
  font-size: 16px;
  color: var(--muted);
  margin: 0;
}
.cover .meta{
  margin-top: 8px;
  display:flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content:center;
}
.cover-dictionary .meta{
  margin-top: 16px;
}
.cover-dictionary .cover-content .meta{
  margin-top: 8px;
}

/* Header bars */
.topbar{
  display:flex;
  height: 18mm;
  margin: -16mm -16mm 12px;
}
.topbar .left{
  width: 34mm;
  background: linear-gradient(to bottom, #3d2618, #2d1b12);
  color: #f5e6d3;
  font-weight: 900;
  display:flex;
  align-items:center;
  justify-content:center;
  letter-spacing: .6px;
}
.topbar .right{
  flex:1;
  background: linear-gradient(to right, #d4a574, #c89a68);
  color: #3d2618;
  font-weight: 900;
  display:flex;
  align-items:center;
  padding: 0 10mm;
  justify-content: space-between;
}
.topbar .right .zh{
  font-size: 18px;
  color: #3d2618;
}
.topbar .right .fr{
  font-size: 14px;
  font-weight: 800;
  opacity: .85;
  color: #5c3d2e;
}

/* Day divider */
.day-divider{
  height: 100%;
  display:flex;
  flex-direction: column;
  justify-content:center;
  align-items:center;
  text-align:center;
  gap: 10px;
}
.day-divider .circle{
  width: 170px;
  height: 170px;
  border-radius: 999px;
  border: 5px solid var(--accent-gold);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 1000;
  color: var(--ink);
  position:relative;
  box-shadow: 0 4px 16px rgba(212,165,116,0.2);
}
.day-divider .circle::after{
  content:"";
  position:absolute;
  width: 126px;
  height: 126px;
  border-radius: 999px;
  border: 2px dashed rgba(212,165,116,.4);
}
.day-divider .circle .day{
  font-size: 56px;
}
.day-divider .theme{
  font-size: 22px;
  font-weight: 900;
  color: var(--ink);
}
.day-divider .theme .fr{
  color: var(--muted);
  font-size: 15px;
  font-weight: 800;
}

/* Tables */
.table{
  width: 100%;
  border-collapse: collapse;
  font-size: 13.5px;
  line-height: 1.35;
}
.table th, .table td{
  border: 1px solid var(--line);
  padding: 7px 8px;
  vertical-align: top;
}
.table th{
  background: linear-gradient(to bottom, #5c3d2e, #3d2618);
  color: #f5e6d3;
  font-weight: 900;
}
.table td .hanzi{
  font-size: 19px;
  font-weight: 400;
  color: var(--ink);
}
.table td .pinyin{
  color: var(--muted);
  font-weight: 800;
}
.table td .pos{
  display:inline-block;
  padding: 2px 6px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  background: rgba(212,165,116,.15);
  color: var(--ink);
  margin-right: 6px;
}
.table td .note{
  margin-top: 6px;
  color: var(--muted);
  font-size: 12.5px;
}

/* Reference blocks */
.callout{
  border-left: 5px solid var(--accent-gold);
  background: rgba(212,165,116,.08);
  padding: 10px 12px;
  border-radius: 10px;
  margin-top: 10px;
}
.callout .title{
  font-weight: 900;
  margin: 0 0 6px;
  color: var(--ink);
}

.ref-layout{
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-areas:
    "lead lead"
    "explain explain"
    "table table"
    "examples examples";
  gap: 12px;
  margin-top: 6px;
  align-items: start;
}
.ref-layout.no-explain{
  grid-template-areas:
    "lead lead"
    "table table"
    "examples examples";
}
.ref-explain{
  grid-area: explain;
  background: linear-gradient(135deg, rgba(212,165,116,0.16), rgba(255,255,255,0.97));
  border: 1px solid rgba(212,165,116,0.3);
  border-radius: 12px;
  padding: 12px 14px;
}
.ref-lead{
  grid-area: lead;
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(212,165,116,0.3);
  border-radius: 12px;
  padding: 12px 14px;
}
.ref-explain .p{
  margin: 4px 0 0;
  font-size: 13.5px;
}
.ref-examples{
  grid-area: examples;
  background: rgba(255,255,255,0.98);
  border: 1px solid rgba(212,165,116,0.3);
  border-radius: 12px;
  padding: 12px 14px;
}
.ref-title{
  font-weight: 900;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--accent-gold);
  margin-bottom: 6px;
}
.examples-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.example-card{
  border: 1px solid rgba(212,165,116,0.25);
  border-radius: 10px;
  padding: 10px 12px;
  background: rgba(253,251,247,0.95);
  min-height: 84px;
}
.example-zh{
  font-family: var(--hanzi-font);
  font-size: 18px;
  font-weight: 600;
  color: var(--ink);
}
.example-pinyin{
  font-size: 13px;
  color: var(--accent-gold);
  font-weight: 700;
  margin-top: 2px;
}
.example-fr{
  font-size: 12.5px;
  color: var(--muted);
  margin-top: 2px;
  line-height: 1.35;
}
.ref-table-wrap{
  grid-area: table;
  background: rgba(255,255,255,0.9);
  border: 1px solid rgba(212,165,116,0.25);
  border-radius: 12px;
  padding: 12px 14px;
}
.ref-table{
  font-size: 12.5px;
}
.ref-table th,
.ref-table td{
  padding: 7px 9px;
}
ul.clean{
  margin: 6px 0 0 18px;
  color: var(--ink);
  font-size: 13px;
}
ul.clean li{ margin: 3px 0; }
}
ul.clean{
  margin: 6px 0 0 18px;
  color: var(--ink);
}
ul.clean li{ margin: 4px 0; }

/* Workbook / tianzige */
.practice{
  display:flex;
  gap: 10mm;
  align-items: flex-start;
}
.workbook .practice{
  display:grid;
  grid-template-columns: 62mm 1fr;
  gap: 8mm;
  align-items: start;
}
.practice .big{
  width: 58mm;
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 10mm 8mm;
  background: rgba(255,255,255,.35);
}
.workbook .practice .big{
  width: auto;
  border: 1px solid rgba(212,165,116,.25);
  background:
    linear-gradient(180deg, rgba(255,255,255,.95), rgba(253,251,247,.8));
  box-shadow: 0 2px 8px rgba(92,61,46,0.08);
}
.practice .big .char{
  font-size: 74px;
  font-weight: 900;
  line-height: 1.0;
  color: var(--ink);
}
.workbook .practice .big .char{
  font-size: 80px;
}
.practice .big .py{
  margin-top: 6px;
  font-weight: 900;
  color: var(--muted);
}
.practice .grid{
  flex:1;
  align-self: start;
}

.grid{
  display:grid;
  --gap: 3mm;
  gap: var(--gap);
  grid-template-columns: repeat(var(--cols, 6), var(--cell, 1fr));
  grid-auto-rows: var(--cell, 1fr);
}
.cell{
  border: 1px solid rgba(92,61,46,.15);
  position:relative;
  background: rgba(255,255,255,.5);
  overflow: hidden;
}
.workbook .cell{
  border-color: rgba(212,165,116,.25);
  background: rgba(255,255,255,.65);
}
.cell::before, .cell::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
}
.cell::before{
  border-top: 1px dashed rgba(92,61,46,.12);
  border-bottom: 1px dashed rgba(92,61,46,.12);
  top: 50%;
  bottom: auto;
  height: 0;
}
.cell::after{
  border-left: 1px dashed rgba(92,61,46,.12);
  border-right: 1px dashed rgba(92,61,46,.12);
  left: 50%;
  right: auto;
  width: 0;
}
.cell .ghost{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 34px;
  font-weight: 900;
  color: rgba(92,61,46,.12);
}
.cell.first .ghost{ color: rgba(92,61,46,.45); }

.workbook .cell.model .ghost{
  color: rgba(92,61,46,.15);
}
.workbook .cell.first .ghost{
  color: rgba(92,61,46,.4);
}

.workbook .meta-line{
  display:flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 10px;
}
.workbook .pill{
  display:inline-flex;
  align-items:center;
  padding: 4px 9px;
  border-radius: 999px;
  background: rgba(212,165,116,.15);
  color: var(--ink);
  font-size: 12px;
  font-weight: 800;
  border: 1px solid rgba(212,165,116,.25);
}
.workbook .pill.alt{
  background: rgba(200,133,107,.12);
  color: #8b5a3c;
}
.workbook .keyword{
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px dashed rgba(212,165,116,.3);
}
.workbook .keyword .label,
.workbook .examples .label{
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--muted);
  font-weight: 800;
  margin-bottom: 6px;
}
.workbook .keyword .k-hanzi{
  font-size: 22px;
  font-weight: 900;
  color: var(--ink);
}
.workbook .keyword .k-pinyin{
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}
.workbook .keyword .k-fr{
  font-size: 12px;
  color: var(--muted);
}
.workbook .examples{
  margin-top: 12px;
}
.workbook .example{
  display:grid;
  grid-template-columns: auto 1fr;
  gap: 4px 8px;
  padding: 6px 0;
  border-bottom: 1px dashed rgba(212,165,116,.25);
}
.workbook .example:last-child{
  border-bottom: none;
}
.workbook .example .hanzi{
  font-size: 18px;
  font-weight: 900;
  color: var(--ink);
}
.workbook .example .pinyin{
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
}
.workbook .example .fr{
  grid-column: 1 / -1;
  font-size: 12px;
  color: var(--muted);
}
.workbook .hint{
  font-size: 11px;
  color: var(--muted);
  margin-top: 10px;
}
.workbook .tasks{
  margin-top: 8mm;
  display:flex;
  gap: 8mm;
  flex-wrap: wrap;
}
.workbook .task{
  display:flex;
  align-items:center;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}
.workbook .task .box{
  width: 12px;
  height: 12px;
  border: 1.5px solid rgba(212,165,116,.5);
  border-radius: 3px;
  display:inline-block;
  background: rgba(255,255,255,.7);
}

.workbook .steps{
  list-style: none;
  counter-reset: step;
  padding: 0;
  margin: 6px 0 0;
  display:grid;
  gap: 8px;
}
.workbook .steps li{
  background: rgba(212,165,116,.08);
  border: 1px solid rgba(212,165,116,.2);
  padding: 8px 10px 8px 38px;
  border-radius: 10px;
  position: relative;
  font-size: 13px;
  color: var(--ink);
}
.workbook .steps li::before{
  counter-increment: step;
  content: counter(step);
  position:absolute;
  left: 10px;
  top: 8px;
  width: 20px;
  height: 20px;
  border-radius: 999px;
  background: linear-gradient(to bottom, #5c3d2e, #3d2618);
  color: #f5e6d3;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 11px;
  font-weight: 800;
}

.workbook .progress-grid{
  margin-top: 6px;
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6mm;
}
.workbook .progress-card{
  border: 1px solid rgba(212,165,116,.25);
  border-radius: 12px;
  padding: 8px;
  background: rgba(255,255,255,.7);
  text-align: center;
  box-shadow: 0 2px 8px rgba(92,61,46,0.06);
}
.workbook .progress-card .circle{
  width: 42px;
  height: 42px;
  border-radius: 999px;
  border: 2px dashed rgba(212,165,116,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  margin: 0 auto 6px;
  font-weight: 900;
  color: var(--ink);
}

.workbook .section-divider{
  height: 100%;
  display:flex;
  flex-direction: column;
  justify-content:center;
  align-items:center;
  text-align:center;
  gap: 10px;
}
.workbook .section-divider .pill{
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 2px;
  background: rgba(212,165,116,.15);
  padding: 8px 16px;
  border-radius: 999px;
  border: 1px solid rgba(212,165,116,.3);
}
.workbook .section-divider .title{
  font-size: 30px;
  font-weight: 900;
  color: var(--ink);
}
.workbook .section-divider .subtitle{
  font-size: 14px;
  color: var(--muted);
}

.workbook .lesson-titlebar{
  background: linear-gradient(to right, #3d2618, #5c3d2e);
  color: #f5e6d3;
  font-weight: 900;
  font-size: 26px;
  padding: 10px 14px;
  border-radius: 8px;
  margin: 0 0 10px;
  box-shadow: 0 4px 12px rgba(92,61,46,0.15);
}
.workbook .lesson-subtitle{
  font-size: 13px;
  font-weight: 800;
  color: var(--muted);
  margin-bottom: 8px;
}
.workbook .lesson-intro{
  font-size: 14px;
  color: var(--ink);
  opacity: 0.85;
  margin: 6px 0 12px;
}
.workbook .lesson-p{
  font-size: 13px;
  color: var(--ink);
  opacity: 0.85;
  line-height: 1.45;
  margin: 0 0 8px;
}
.workbook .lesson-table{
  width: 100%;
  border-collapse: collapse;
  font-size: 13.5px;
  line-height: 1.35;
  margin: 8px 0 10px;
}
.workbook .lesson-table th,
.workbook .lesson-table td{
  border: 1px solid var(--line);
  padding: 7px 8px;
  vertical-align: top;
}
.workbook .lesson-table th{
  background: linear-gradient(to bottom, #5c3d2e, #3d2618);
  color: #f5e6d3;
  font-weight: 900;
}
.workbook .lesson-callout{
  border-left: 5px solid var(--accent-gold);
  background: rgba(212,165,116,.08);
  padding: 10px 12px;
  border-radius: 10px;
  margin-top: 10px;
}

.workbook .rewrite-title{
  background: linear-gradient(to right, #3d2618, #5c3d2e);
}
.workbook .rewrite{
  display:grid;
  gap: 8mm;
  margin-top: 6mm;
}
.workbook .rewrite-row{
  display:grid;
  grid-template-columns: 52mm 1fr;
  gap: 6mm;
  align-items:start;
}
.workbook .rewrite-grids{
  display:grid;
  gap: 2mm;
}
.workbook .rewrite-meta{
  display:flex;
  flex-direction: column;
  gap: 4px;
  padding-top: 2px;
}
.workbook .rewrite-label{
  font-size: 12px;
  color: var(--accent-gold);
  font-weight: 800;
}
.workbook .rewrite-term{
  font-size: 12px;
  font-weight: 800;
  color: var(--accent-gold);
}
.workbook .rewrite-hanzi{
  font-size: 24px;
  font-weight: normal;
  color: var(--ink);
}
.workbook .rewrite-pinyin{
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}
.workbook .rewrite-fr{
  font-size: 12px;
  color: var(--muted);
}
.workbook .rewrite-grid{
  --gap: 2mm;
  display: inline-grid;
  grid-template-columns: repeat(var(--cols, 5), var(--cell, 12mm));
  grid-template-rows: repeat(var(--rows, 1), var(--cell, 12mm));
  grid-auto-rows: var(--cell, 12mm);
  width: max-content;
  justify-self: start;
}
.workbook .stroke-grid{
  --gap: 2mm;
  display: inline-grid;
  grid-template-columns: repeat(var(--cols, 8), var(--cell, 12mm));
  grid-auto-rows: var(--cell, 12mm);
  width: max-content;
  justify-self: start;
}
.workbook .stroke-grid .cell svg{
  width: 100%;
  height: 100%;
  display: block;
}
.workbook .cell svg{
  width: 100%;
  height: 100%;
  display: block;
}
.workbook .rewrite-grid .ghost{
  font-size: 26px;
  font-weight: normal;
}
.workbook .rewrite-grid .cell{
  border-color: rgba(212,165,116,.35);
  background: rgba(255,255,255,.75);
  border-width: 1px;
}
.workbook .cell.missing{
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--hanzi-font);
  font-size: 20px;
  color: rgba(92,61,46,0.35);
}

.workbook .day-divider .circle{
  border-color: var(--accent-gold);
  color: var(--ink);
}
.workbook .day-divider .circle::after{
  border-color: rgba(212,165,116,.4);
}
.workbook .day-divider .theme{
  color: var(--ink);
}

/* Vocab Table (Day summary) */
.vocab-table{
  width: 100%;
  border-collapse: collapse;
  font-size: 12.5px;
  line-height: 1.35;
  margin-top: 4mm;
}

.vocab-table th{
  background: linear-gradient(to bottom, #5c3d2e, #3d2618);
  color: #f5e6d3;
  font-weight: 800;
  padding: 8px 6px;
  text-align: left;
  font-size: 12.5px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.vocab-table th.col-pinyin,
.vocab-table th.col-pron,
.vocab-table th.col-def{
  color: #fff2e2;
  font-size: 13px;
  letter-spacing: 0.2px;
  text-transform: none;
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);
  white-space: nowrap;
}

.vocab-table td{
  border-bottom: 1px solid var(--line);
  padding: 6px;
  vertical-align: top;
}

.vocab-table tr:nth-child(even) td{
  background: rgba(212,165,116,0.04);
}

.vocab-table .col-num{
  width: 8mm;
  text-align: center;
  font-weight: 800;
  color: var(--accent-gold);
}

.vocab-table .col-hanzi{
  width: 22mm;
  text-align: center;
}

.vocab-table .col-hanzi .hanzi{
  font-family: var(--hanzi-font);
  font-size: 21px;
  font-weight: 400;
  color: var(--ink);
}

.vocab-table .col-pinyin{
  width: 24mm;
  font-weight: 700;
  color: var(--muted);
  font-size: 13.5px;
}

.vocab-table .col-pron{
  width: 30mm;
  font-size: 12.5px;
  color: var(--ink);
}

.vocab-table .col-def{
  font-size: 12px;
  color: var(--ink);
}

.vocab-table .col-def .def-main{
  margin-bottom: 3px;
}

.vocab-table .col-def .pos{
  display: inline-block;
  padding: 1px 5px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 800;
  background: rgba(212,165,116,.15);
  color: var(--ink);
  margin-right: 4px;
}

.vocab-table .col-def .def-example{
  font-size: 11px;
  color: var(--muted);
  font-style: italic;
  margin-top: 2px;
  padding-left: 8px;
  border-left: 2px solid rgba(212,165,116,0.3);
}

.vocab-table .col-def .def-note{
  font-size: 11px;
  color: var(--accent-gold);
  margin-top: 3px;
  padding: 3px 6px;
  background: rgba(212,165,116,0.08);
  border-radius: 4px;
}

/* Liens tableau → réécriture */
.vocab-table .num-link,
.vocab-table .hanzi-link{
  text-decoration: none;
  color: inherit;
  display: block;
}

.vocab-table .num-link{
  font-weight: 800;
  color: var(--accent-gold);
  padding: 2px 4px;
  border-radius: 4px;
  transition: all 0.15s;
}

.vocab-table .num-link:hover{
  background: var(--accent-gold);
  color: white;
}

.vocab-table .hanzi-link:hover .hanzi{
  color: var(--accent-gold);
  text-decoration: underline;
}

/* Header pratique avec lien retour */
.practice-header{
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 12px;
}

.practice-header .h1{
  flex: 1;
}

.back-link{
  font-size: 11px;
  color: var(--accent-gold);
  text-decoration: none;
  padding: 4px 10px;
  border: 1px solid var(--accent-gold);
  border-radius: 6px;
  white-space: nowrap;
  transition: all 0.15s;
}

.back-link:hover{
  background: var(--accent-gold);
  color: white;
}

@media print{
  .back-link{
    display: none;
  }
}

/* Table of Contents */
.toc-title{
  font-size: 36px;
  font-weight: 900;
  color: var(--ink);
  text-align: center;
  margin-bottom: 12mm;
  padding-bottom: 6mm;
  border-bottom: 3px solid var(--accent-gold);
}

.toc{
  display: flex;
  flex-direction: column;
  gap: 8mm;
}

.toc-group{
  margin-bottom: 4mm;
}

.toc-group-title{
  display: block;
  font-size: 16px;
  font-weight: 900;
  color: var(--ink);
  padding: 8px 12px;
  background: linear-gradient(to right, rgba(212,165,116,0.15), rgba(212,165,116,0.05));
  border-left: 4px solid var(--accent-gold);
  border-radius: 0 8px 8px 0;
  margin-bottom: 6px;
  text-decoration: none;
  transition: background 0.2s;
}

.toc-group-title:hover{
  background: linear-gradient(to right, rgba(212,165,116,0.25), rgba(212,165,116,0.1));
}

.toc-group-title .toc-zh{
  font-family: var(--hanzi-font);
  margin-right: 8px;
  color: var(--accent-gold);
}

.toc-list{
  list-style: none;
  padding: 0;
  margin: 0 0 0 16px;
}

.toc-list li{
  margin: 4px 0;
}

.toc-list a{
  display: flex;
  align-items: baseline;
  gap: 6px;
  padding: 6px 10px;
  text-decoration: none;
  color: var(--ink);
  font-size: 13px;
  border-radius: 6px;
  transition: background 0.2s;
}

.toc-list a:hover{
  background: rgba(212,165,116,0.1);
}

.toc-lesson-zh{
  font-family: var(--hanzi-font);
  font-size: 14px;
  color: var(--muted);
  min-width: 50px;
  flex-shrink: 0;
}

.toc-text{
  flex-shrink: 0;
}

.toc-dots{
  flex: 1;
  border-bottom: 1px dotted var(--line);
  margin: 0 4px;
  min-width: 20px;
}

.toc-page{
  font-weight: 800;
  color: var(--accent-gold);
  min-width: 24px;
  text-align: right;
  flex-shrink: 0;
}

.toc-group-title .toc-dots{
  display: inline-block;
  flex: 1;
  border-bottom: 1px dotted rgba(212,165,116,0.4);
  margin: 0 8px;
  vertical-align: middle;
}

.toc-group-title .toc-page{
  font-weight: 900;
  color: var(--ink);
}

.toc-group-title-centered{
  text-align: center;
  border-left: none;
  border-radius: 8px;
  margin-bottom: 6mm;
}

.toc-days{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2px 12px;
}

.toc-days a{
  font-size: 12px;
  padding: 5px 8px;
}

.toc-day-num{
  font-weight: 800;
  color: var(--accent-gold);
  min-width: 52px;
}

.toc-days .toc-zh{
  font-family: var(--hanzi-font);
  font-size: 13px;
  color: var(--muted);
  margin-right: 4px;
}

/* Sommaire - sous-titre */
.toc-subtitle{
  font-size: 14px;
  color: var(--muted);
  text-align: center;
  margin-bottom: 8mm;
  font-weight: 600;
}

/* Sommaire - Grille compacte des jours */
.toc-days-grid{
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 4mm;
  margin-top: 4mm;
}

.toc-day-card{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 4mm 2mm;
  border: 1px solid rgba(212,165,116,0.25);
  border-radius: 8px;
  background: rgba(255,255,255,0.7);
  text-decoration: none;
  transition: all 0.2s;
  min-height: 22mm;
}

.toc-day-card .toc-day-num{
  font-weight: 800;
  color: var(--accent-gold);
  font-size: 12px;
}

.toc-day-card .toc-zh{
  font-family: var(--hanzi-font);
  font-size: 14px;
  color: var(--muted);
  margin-top: 2px;
}

.toc-day-card .toc-text{
  font-size: 12px;
  color: var(--ink);
  margin-top: 1px;
}

.toc-day-card:hover{
  background: rgba(212,165,116,0.12);
  border-color: var(--accent-gold);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(92,61,46,0.1);
}

.toc-day-card .toc-day-num{
  font-size: 18px;
  font-weight: 900;
  color: var(--accent-gold);
  line-height: 1;
  margin-bottom: 2mm;
}

.toc-day-card .toc-day-zh{
  font-family: var(--hanzi-font);
  font-size: 16px;
  font-weight: 700;
  color: var(--ink);
  line-height: 1.2;
}

.toc-day-card .toc-day-fr{
  font-size: 10px;
  color: var(--muted);
  line-height: 1.2;
  margin-top: 1mm;
}

.toc-day-card .toc-day-page{
  font-size: 9px;
  font-weight: 700;
  color: var(--accent-gold);
  margin-top: 2mm;
  opacity: 0.8;
}


/* Print */
@media print{
  body{ background: var(--paper); }
  #app{ padding:0; }
  .page{
    margin:0;
    box-shadow:none;
    page-break-after: always;
  }
}

@page { size: A4; margin: 0; }
