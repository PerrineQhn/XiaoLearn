---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import ProductCard from '../components/ProductCard.astro';
import PricingCard from '../components/PricingCard.astro';
import { featuredProducts, subscriptions, pdfs, ankiDecks } from '../data/products';
---

<BaseLayout title="XiaoLearn Shop - Apprenez le chinois mandarin">
  <Hero
    title="Apprenez le chinois <span class='highlight'>efficacement</span>"
    subtitle="D√©couvrez nos applications, manuels PDF et decks Anki pour ma√Ætriser le mandarin et r√©ussir le HSK."
    ctaText="Voir les tarifs"
    ctaLink="/tarifs"
    secondaryCtaText="Essayer gratuitement"
    secondaryCtaLink="https://xiaolearn.com"
  />

  <!-- Section Produits Vedettes -->
  <section class="section featured-section">
    <div class="container">
      <div class="section-header">
        <h2>Nos produits vedettes</h2>
        <p>Tout ce dont vous avez besoin pour progresser en chinois mandarin</p>
      </div>

      <div class="grid grid-3">
        {featuredProducts.map(product => (
          <ProductCard product={product} />
        ))}
      </div>

      <div class="section-cta">
        <a href="/tarifs" class="btn btn-secondary">
          Voir les tarifs
        </a>
      </div>
    </div>
  </section>

  <!-- Section Abonnements -->
  <section class="section pricing-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge">Abonnements</span>
        <h2>Acc√®s complet √† l'application XiaoLearn</h2>
        <p>Choisissez la formule qui vous convient pour progresser √† votre rythme</p>
      </div>

      <div class="pricing-grid">
        {subscriptions.map(sub => (
          <PricingCard product={sub} />
        ))}
      </div>
    </div>
  </section>

  <!-- Section Confiance -->
  <section class="section trust-section">
    <div class="container">
      <div class="trust-grid">
        <div class="trust-item">
          <div class="trust-icon">üîí</div>
          <h3>Paiement s√©curis√©</h3>
          <p>Vos transactions sont prot√©g√©es par Stripe, leader mondial du paiement en ligne.</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">‚ö°</div>
          <h3>Acc√®s imm√©diat</h3>
          <p>Recevez vos produits num√©riques instantan√©ment apr√®s votre achat.</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">üí∞</div>
          <h3>Satisfait ou rembours√©</h3>
          <p>14 jours pour changer d'avis, conform√©ment √† la l√©gislation fran√ßaise.</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">üìß</div>
          <h3>Support r√©actif</h3>
          <p>Une question ? Notre √©quipe vous r√©pond sous 24h maximum.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section PDFs -->
  <section class="section products-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge">Manuels PDF</span>
        <h2>Ressources d'√©tude imprimables</h2>
        <p>Des guides complets pour √©tudier hors ligne et pr√©parer les examens HSK</p>
      </div>

      <div class="grid grid-2">
        {pdfs.map(product => (
          <ProductCard product={product} />
        ))}
      </div>
    </div>
  </section>

  <!-- Section Anki -->
  <section class="section products-section alt-bg">
    <div class="container">
      <div class="section-header">
        <span class="section-badge">Decks Anki</span>
        <h2>Flashcards intelligentes</h2>
        <p>M√©morisez efficacement avec le syst√®me de r√©p√©tition espac√©e Anki</p>
      </div>

      <div class="grid grid-2">
        {ankiDecks.map(product => (
          <ProductCard product={product} />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Final -->
  <section class="section cta-section">
    <div class="container">
      <div class="cta-box">
        <h2>Pr√™t √† commencer votre apprentissage ?</h2>
        <p>Rejoignez des milliers d'apprenants qui progressent chaque jour avec XiaoLearn.</p>
        <div class="cta-actions">
          <a href="/tarifs" class="btn btn-primary btn-lg">
            D√©couvrir les tarifs
            <span class="arrow">‚Üí</span>
          </a>
          <a href="https://xiaolearn.com" class="btn btn-secondary btn-lg" target="_blank" rel="noopener">
            Essayer l'app gratuitement
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .section-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
  }

  .section-header h2 {
    margin-bottom: var(--spacing-sm);
  }

  .section-header p {
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
  }

  .section-badge {
    display: inline-block;
    background: var(--primary-red-light);
    color: var(--primary-red);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-full);
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: var(--spacing-md);
  }

  .section-cta {
    text-align: center;
    margin-top: var(--spacing-2xl);
  }

  /* Pricing Section */
  .pricing-section {
    background: var(--bg-secondary);
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xl);
    max-width: 800px;
    margin: 0 auto;
  }

  @media (max-width: 640px) {
    .pricing-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Trust Section */
  .trust-section {
    background: var(--bg-primary);
  }

  .trust-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-xl);
  }

  .trust-item {
    text-align: center;
  }

  .trust-icon {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-md);
  }

  .trust-item h3 {
    font-size: 1rem;
    margin-bottom: var(--spacing-xs);
  }

  .trust-item p {
    font-size: 0.9rem;
    color: var(--text-secondary);
  }

  @media (max-width: 900px) {
    .trust-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .trust-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Alt Background */
  .alt-bg {
    background: var(--bg-secondary);
  }

  /* CTA Section */
  .cta-section {
    padding: var(--spacing-3xl) 0;
  }

  .cta-box {
    background: linear-gradient(135deg, rgba(216, 72, 62, 0.92), rgba(240, 183, 98, 0.7));
    border-radius: var(--radius-xl);
    padding: var(--spacing-3xl);
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .cta-box::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle at 25% 20%, rgba(255, 255, 255, 0.35), transparent 45%);
    mix-blend-mode: screen;
  }

  .cta-box h2 {
    color: var(--text-inverse);
    margin-bottom: var(--spacing-md);
    position: relative;
  }

  .cta-box p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.1rem;
    margin-bottom: var(--spacing-xl);
    position: relative;
  }

  .cta-actions {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    position: relative;
  }

  .cta-box .btn-primary {
    background: var(--text-inverse);
    color: var(--primary-red);
  }

  .cta-box .btn-secondary {
    background: transparent;
    color: var(--text-inverse);
    border-color: var(--text-inverse);
  }
</style>
