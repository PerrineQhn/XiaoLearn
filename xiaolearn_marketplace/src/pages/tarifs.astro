---
import BaseLayout from '../layouts/BaseLayout.astro';
import PricingCard from '../components/PricingCard.astro';
import { subscriptions } from '../data/products';
---

<BaseLayout title="Tarifs - XiaoLearn Shop">
  <section class="page-header">
    <div class="container">
      <h1>Tarifs simples et transparents</h1>
      <p>Choisissez la formule qui correspond √† vos objectifs d'apprentissage</p>
    </div>
  </section>

  <!-- Pricing Cards -->
  <section class="section">
    <div class="container">
      <div class="pricing-grid">
        {subscriptions.map(sub => (
          <PricingCard product={sub} />
        ))}
      </div>
    </div>
  </section>

  <!-- Comparaison -->
  <section class="section comparison-section">
    <div class="container">
      <h2 class="text-center">Comparaison d√©taill√©e</h2>

      <div class="comparison-table-wrapper">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Fonctionnalit√©</th>
              <th>Gratuit</th>
              <th>Premium</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Le√ßons HSK 1</td>
              <td>5 premi√®res</td>
              <td class="highlight">Toutes (30+)</td>
            </tr>
            <tr>
              <td>Le√ßons HSK 2-3</td>
              <td>‚ùå</td>
              <td class="highlight">‚úì 70+ le√ßons</td>
            </tr>
            <tr>
              <td>Syst√®me de r√©vision SRS</td>
              <td>Limit√©</td>
              <td class="highlight">Complet</td>
            </tr>
            <tr>
              <td>Assistant IA</td>
              <td>‚ùå</td>
              <td class="highlight">‚úì Illimit√©</td>
            </tr>
            <tr>
              <td>Mini-jeux</td>
              <td>1 jeu</td>
              <td class="highlight">5 jeux</td>
            </tr>
            <tr>
              <td>Statistiques</td>
              <td>Basiques</td>
              <td class="highlight">Avanc√©es</td>
            </tr>
            <tr>
              <td>Synchronisation</td>
              <td>‚ùå</td>
              <td class="highlight">‚úì Multi-appareils</td>
            </tr>
            <tr>
              <td>Support prioritaire</td>
              <td>‚ùå</td>
              <td class="highlight">‚úì</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Garanties -->
  <section class="section guarantees-section">
    <div class="container">
      <div class="guarantees-grid">
        <div class="guarantee">
          <div class="guarantee-icon">üí∞</div>
          <h3>Satisfait ou rembours√©</h3>
          <p>14 jours pour tester. Si vous n'√™tes pas satisfait, nous vous remboursons int√©gralement, sans question.</p>
        </div>
        <div class="guarantee">
          <div class="guarantee-icon">üîÑ</div>
          <h3>Annulation flexible</h3>
          <p>Annulez √† tout moment en un clic depuis votre espace client. Pas d'engagement, pas de frais cach√©s.</p>
        </div>
        <div class="guarantee">
          <div class="guarantee-icon">üîí</div>
          <h3>Paiement s√©curis√©</h3>
          <p>Vos paiements sont trait√©s par Stripe, leader mondial de la s√©curit√© des transactions en ligne.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section faq-section">
    <div class="container">
      <h2 class="text-center">Questions sur les tarifs</h2>

      <div class="faq-list">
        <details class="faq-item">
          <summary>Quelle est la diff√©rence entre mensuel et annuel ?</summary>
          <p>Les deux formules donnent acc√®s aux m√™mes fonctionnalit√©s. L'abonnement annuel vous fait √©conomiser 20% par rapport au mensuel, soit l'√©quivalent de 2 mois gratuits.</p>
        </details>
        <details class="faq-item">
          <summary>Y a-t-il des frais cach√©s ?</summary>
          <p>Non, le prix affich√© est le prix final TTC. Il n'y a aucun frais cach√©, de configuration ou autre.</p>
        </details>
        <details class="faq-item">
          <summary>Comment fonctionne le remboursement ?</summary>
          <p>Si vous demandez un remboursement dans les 14 jours suivant votre achat, nous vous remboursons int√©gralement par le m√™me moyen de paiement utilis√©.</p>
        </details>
        <details class="faq-item">
          <summary>Puis-je passer du mensuel √† l'annuel ?</summary>
          <p>Oui, vous pouvez changer de formule √† tout moment depuis votre espace client. La diff√©rence sera calcul√©e au prorata.</p>
        </details>
        <details class="faq-item">
          <summary>Les manuels PDF et decks Anki sont-ils inclus ?</summary>
          <p>Non, les manuels PDF et les decks Anki sont des produits s√©par√©s vendus √† l'unit√©. L'abonnement donne uniquement acc√®s √† l'application web XiaoLearn.</p>
        </details>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .page-header {
    background: linear-gradient(135deg, rgba(216, 72, 62, 0.1), rgba(240, 183, 98, 0.1));
    padding: var(--spacing-3xl) 0;
    text-align: center;
  }

  .page-header h1 {
    margin-bottom: var(--spacing-sm);
  }

  .page-header p {
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xl);
    max-width: 800px;
    margin: 0 auto;
  }

  @media (max-width: 640px) {
    .pricing-grid {
      grid-template-columns: 1fr;
    }
  }

  .comparison-section {
    background: var(--bg-secondary);
  }

  .comparison-section h2 {
    margin-bottom: var(--spacing-2xl);
  }

  .comparison-table-wrapper {
    overflow-x: auto;
    max-width: 700px;
    margin: 0 auto;
  }

  .comparison-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }

  .comparison-table th,
  .comparison-table td {
    padding: var(--spacing-md) var(--spacing-lg);
    text-align: left;
    border-bottom: 1px solid var(--border-light);
  }

  .comparison-table th {
    background: var(--primary-red);
    color: var(--text-inverse);
    font-weight: 600;
  }

  .comparison-table th:first-child {
    background: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .comparison-table td:first-child {
    font-weight: 500;
  }

  .comparison-table td.highlight {
    color: var(--jade-green);
    font-weight: 600;
  }

  .comparison-table tr:last-child td {
    border-bottom: none;
  }

  .guarantees-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-xl);
  }

  .guarantee {
    text-align: center;
    padding: var(--spacing-xl);
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
  }

  .guarantee-icon {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-md);
  }

  .guarantee h3 {
    font-size: 1.1rem;
    margin-bottom: var(--spacing-sm);
  }

  .guarantee p {
    font-size: 0.9rem;
    color: var(--text-secondary);
  }

  @media (max-width: 900px) {
    .guarantees-grid {
      grid-template-columns: 1fr;
    }
  }

  .faq-section {
    background: var(--bg-secondary);
  }

  .faq-section h2 {
    margin-bottom: var(--spacing-2xl);
  }

  .faq-list {
    max-width: 700px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .faq-item {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .faq-item summary {
    padding: var(--spacing-lg);
    font-weight: 600;
    cursor: pointer;
    list-style: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .faq-item summary::after {
    content: '+';
    font-size: 1.25rem;
    color: var(--primary-red);
  }

  .faq-item[open] summary::after {
    content: '‚àí';
  }

  .faq-item p {
    padding: 0 var(--spacing-lg) var(--spacing-lg);
    color: var(--text-secondary);
    line-height: 1.6;
  }
</style>
